{"version":3,"sources":["images/green-left-icon-arrow-left.png","images/spotify-youtube.jpg","images/dynamic.jpg","images/monkey-with-headphones.jpg","pages/home.js","components/PlaylistButton.js","components/Navigation.js","pages/pickPlaylist.js","pages/youtube.js","pages/modes.js","pages/dynamic.js","App.js","serviceWorker.js","index.js"],"names":["Home","className","Card","Img","src","require","alt","href","Button","onClick","handleClick","Component","spotifyWebApi","Spotify","PlaylistButton","props","playlistID","id","playlistName","name","numOfTracks","state","tracks","_isMounted","loop","bind","this","getPlaylistTracks","then","response","total","number","ID","i","Math","ceil","offset","r","push","map","hundred_tracks","items","concat","apply","setState","item","album_name","track","album","album_images","images","artists","artist","duration","duration_ms","track_name","date","added_at","to","pathname","image","NavigationBar","scrollPos","window","pageYOffset","show","Navbar","back","height","children","PickPlaylist","playlists","getPlaylists","console","log","ls","get","setAccessToken","getUserPlaylists","catch","error","Navigation","playlist","index","url","Youtube","loadVideo","player","YT","Player","width","videoId","playerVars","controls","autoplay","disablekb","enablejsapi","events","onPlayerReady","onPlayerStateChange","onError","localStorage","getItem","location","setItem","JSON","stringify","shuffleArray","length","apiKey","search_terms","parse","current_index","query_IDs","Array","fill","lyric_IDs","lyric","last_updated","fetching","search2","handleQueueClick","min","tag","document","createElement","onYouTubeIframeAPIReady","firstScriptTag","getElementsByTagName","parentNode","insertBefore","array","j","floor","random","e","target","playVideo","data","PlayerState","ENDED","start","end","controller","AbortController","signal","slice","fetch","method","headers","body","json","search_term","query","axios","changed","button_list","size","playlist_tracks","disabled","loadVideoById","abort","handleLyricToggleClick","createButtons","typedRef","typed","strings","typeSpeed","Spinner","animation","withRouter","Modes","getHashParams","getHashParams2","params","split","x","token","hashParams","q","hash","substring","exec","decodeURIComponent","Dynamic","spotify_id","first_video","current_state","is_interval","search","checkStatus","clearInterval","refreshIntervalId","getMyCurrentPlaybackState","a","getMyRecentlyPlayedTracks","setInterval","shuffle_state","getElementById","click","repeat_state","setRepeat","is_playing","pause","addEventListener","pauseVideo","PLAYING","PAUSED","App","path","component","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.0a177260.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/green-left-icon-arrow-left.215e6636.png\";","export default __webpack_public_path__ + \"static/media/spotify-youtube.df90fc06.jpg\";","export default __webpack_public_path__ + \"static/media/dynamic.a1ef975b.jpg\";","export default __webpack_public_path__ + \"static/media/monkey-with-headphones.a9df10d7.jpg\";","import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport React, { Component } from 'react';\r\n// import {Link} from \"react-router-dom\";\r\nimport { Button, Card} from \"react-bootstrap\";\r\nimport \"../css/home.css\"\r\n\r\n\r\nclass Home extends Component {\r\n    render() {\r\n        return(\r\n            <div className=\"home-page\">\r\n                <Card className=\"spotify-youtube-card\">\r\n                    <Card.Img className=\"spotify-youtube-card-img\"\r\n                        src={require(\"../images/spotify-youtube.jpg\")}\r\n                        alt=\"Spotify-Youtube\"\r\n                    />\r\n                    <a href=\"http://localhost:8888/login\">\r\n                        <Button className=\"spotify-youtube-card-button\" onClick={() => {this.handleClick()}}> Login With Spotify </Button>\r\n                    </a>\r\n                </Card>\r\n          </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;\r\n\r\n\r\n// ","import React, { Component} from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Spotify from \"spotify-web-api-js\";\r\nimport {Link} from 'react-router-dom';\r\nimport {Button} from \"react-bootstrap\";\r\nimport \"../css/pickPlaylist.css\"\r\n\r\nconst spotifyWebApi = new Spotify();\r\n\r\nclass PlaylistButton extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.playlistID = this.props.id;\r\n        this.playlistName = this.props.name;\r\n        this.numOfTracks = 0;\r\n        this.state  = {\r\n            tracks: []\r\n        }\r\n        this._isMounted = false\r\n        \r\n        \r\n        this.loop.bind(this);\r\n    }\r\n\r\n    async componentWillMount ()  {\r\n  \r\n        this.tracks = [];\r\n\r\n        // Store length of tracks, then start loop of getting all the tracks\r\n        await spotifyWebApi.getPlaylistTracks(this.playlistID).then((response) => {\r\n            this.numOfTracks = response.total\r\n        })\r\n        this.loop(this.numOfTracks, this.playlistID)\r\n\r\n    }\r\n\r\n    // Get all tracks for each playlist by looping through each 100 tracks given\r\n    async loop(number, ID) {\r\n\r\n        this._isMounted = true\r\n\r\n        for (let i=0; i < Math.ceil(number / 100); i++) {\r\n            var r = await spotifyWebApi.getPlaylistTracks(ID, {offset: i*100}).then(response => {return response})\r\n            this.tracks.push(r)\r\n        }\r\n        \r\n\r\n        this.tracks = this.tracks.map(hundred_tracks => {\r\n            return hundred_tracks.items\r\n        })\r\n        this.tracks = [].concat.apply([], this.tracks);\r\n\r\n        if (this._isMounted) {\r\n            \r\n            this.setState({\r\n                tracks: this.tracks.map(item => {\r\n                    return  {\r\n                        album_name: item.track.album.name,\r\n                        album_images: item.track.album.images,\r\n                        artists: item.track.artists.map((artist) => {return artist.name}),\r\n                        duration: item.track.duration_ms,\r\n                        track_name: item.track.name,\r\n                        date: item.added_at,\r\n                        id: item.track.id,\r\n                    }\r\n                })\r\n            })\r\n            this._isMounted = false\r\n        }\r\n    }\r\n\r\n    componentWillUnmount () {\r\n        this._isMounted = false\r\n    }\r\n\r\n    render () {\r\n        if (this.state.tracks === []) return null;\r\n        return (\r\n            <div className=\"playlist-button-and-image-container\">\r\n                <Link to= {{\r\n                    pathname: \"/youtube\",\r\n                    playlistID: this.playlistID,\r\n                    playlistName: this.playlistName,\r\n                    tracks: this.state.tracks\r\n                    }}>\r\n                    <Button className=\"playlist-button\">{this.playlistName}</Button>\r\n                    <img className=\"playlist-image\" src={this.props.image} alt={this.playlistName}/>\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default PlaylistButton","import React, { Component } from 'react';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Navbar } from \"react-bootstrap\";\r\nimport {Link} from 'react-router-dom';\r\nimport \"../css/navigation.css\"\r\n\r\n\r\nclass NavigationBar extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state  = {\r\n            scrollPos: window.pageYOffset,\r\n            show: true,\r\n        }\r\n    }\r\n    render () {\r\n        return(\r\n            <Navbar className=\"navigation\">\r\n                <Link to={\"/\" + this.props.back}>\r\n                    <img className=\"navigation-back-button\" src={require(\"../images/green-left-icon-arrow-left.png\")} alt=\"Green Left Arrow\" height=\"30\" />\r\n                </Link>\r\n                <div> \r\n                    {this.props.children}\r\n                </div>\r\n            </Navbar> \r\n        )\r\n    }\r\n}\r\n\r\nexport default NavigationBar","import React, { Component } from 'react';\r\nimport Spotify from 'spotify-web-api-js';\r\nimport PlaylistButton from \"../components/PlaylistButton\"\r\nimport \"../css/pickPlaylist.css\"\r\nimport NavigationBar from \"../components/Navigation\"\r\nimport ls from 'local-storage'\r\n\r\nconst spotifyWebApi = new Spotify();\r\n\r\nclass PickPlaylist extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            playlists: [],\r\n        }\r\n        this.getPlaylists = this.getPlaylists.bind(this);\r\n        console.log(ls.get(\"access_token\"))\r\n        spotifyWebApi.setAccessToken(ls.get(\"access_token\"))\r\n        \r\n    }\r\n    componentDidMount() {\r\n        this.getPlaylists()\r\n    }\r\n    getPlaylists () {\r\n        spotifyWebApi.getUserPlaylists()\r\n        .then((response) => {\r\n            this.setState({playlists: response.items})})\r\n        .catch((error) => {\r\n            console.log(error)\r\n        });\r\n    }\r\n    render() {\r\n        return(\r\n            <div>\r\n                <NavigationBar back=\"modes\"> </NavigationBar>\r\n                <div className=\"playlist-page\">\r\n                    \r\n                    {/* <div className=\"pick-a-playlist-text\">\r\n                        Pick a playlist\r\n                    </div> */}\r\n                    <div className=\"playlists-container\">\r\n                        {this.state.playlists.map((playlist, index) => (\r\n                            <PlaylistButton key={playlist.name} id={playlist.id} index={index} name={playlist.name} image={playlist.images[0].url}></PlaylistButton>\r\n                            ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PickPlaylist;","import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport {Link, withRouter} from \"react-router-dom\";\r\nimport { Button, Spinner} from \"react-bootstrap\";\r\nimport \"../css/youtube.css\"\r\nimport Spotify from 'spotify-web-api-js'\r\nimport Typed from 'react-typed';\r\n\r\nconst spotifyWebApi =  new Spotify();\r\nclass Youtube extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Get access token to make calls\r\n        spotifyWebApi.setAccessToken(localStorage.getItem(\"access_token\"));\r\n\r\n        // Start off by saving details of this playlist to localstorage if it is available\r\n        if  (this.props.location.tracks) {\r\n            localStorage.setItem(\"tracks\",  JSON.stringify(this.shuffleArray(this.props.location.tracks)))\r\n            localStorage.setItem(\"playlist\", JSON.stringify(this.props.location.playlistName))\r\n            localStorage.setItem(\"length\", JSON.stringify(this.props.location.tracks.length))\r\n        }\r\n\r\n        console.log(this.props.location.tracks)\r\n        \r\n        // Search Terms syntax is - [\"title\", \"spotify-id\", index in the search-terms array]\r\n        this.state = {\r\n            apiKey: \"AIzaSyAUlBPBvCwXcYNNahVcmWPKphhIs4YjaWQ\",\r\n            search_terms: localStorage.getItem(\"tracks\") ? \r\n            JSON.parse(localStorage.getItem(\"tracks\")).map((track, index) => {\r\n                return [track.artists[0] + \" - \" + track.track_name, track.id, index];\r\n            }) : \"\",\r\n            current_index: 0,\r\n            length: JSON.parse(localStorage.getItem(\"length\")),\r\n            query_IDs: Array(JSON.parse(localStorage.getItem(\"length\"))).fill(0),\r\n            lyric_IDs: Array(JSON.parse(localStorage.getItem(\"length\"))).fill(0),\r\n            lyric: false,\r\n            last_updated: 0,\r\n            fetching: false\r\n        }\r\n\r\n        console.log(this.state.search_terms)\r\n\r\n        this._isMounted = false;\r\n\r\n        this.search2 = this.search2.bind(this)\r\n        this.loadVideo = this.loadVideo.bind(this)\r\n        this.handleQueueClick = this.handleQueueClick.bind(this)\r\n        this.onPlayerStateChange = this.onPlayerStateChange.bind(this)\r\n    }\r\n    async componentDidMount() {\r\n        await this.search2(0, Math.min(5, this.state.length));\r\n        if (!window.YT) {\r\n            const tag = document.createElement('script');\r\n            tag.src = 'https://www.youtube.com/iframe_api'\r\n            window.onYouTubeIframeAPIReady = () => {this.loadVideo(this.state.query_IDs[0])};\r\n            const firstScriptTag = document.getElementsByTagName('script')[0];\r\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n        }\r\n        else {\r\n            this.loadVideo(this.state.query_IDs[0]);\r\n        }\r\n\r\n    }\r\n\r\n    loadVideo = (id) => {\r\n           this.player = new window.YT.Player('player', {\r\n            height: '720',\r\n            width: '1280',\r\n            videoId: id,\r\n            playerVars: {\r\n                controls: 1,\r\n                autoplay: 0,\r\n                disablekb: 1,\r\n                enablejsapi: 1,\r\n            },\r\n            events: {\r\n                'onReady': this.onPlayerReady,\r\n                'onStateChange': this.onPlayerStateChange,\r\n                'onError': this.onError,\r\n            }\r\n        });\r\n    }\r\n    shuffleArray(array) {\r\n        for (let i = array.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n        return array\r\n    }\r\n\r\n    onPlayerReady(e) {\r\n        e.target.playVideo();\r\n    }\r\n\r\n    onPlayerStateChange(e) {\r\n        if (e.data === window.YT.PlayerState.ENDED) {\r\n            console.log(\"YouTube Video is ENDING!!\");\r\n            this.handleQueueClick(this.state.current_index+1);\r\n        }\r\n    }\r\n\r\n    onError(e) {\r\n        if ((e.data === 101) || (e.data === 150)) {\r\n            this.handleQueueClick(this.state.current_index+1);\r\n        }\r\n\r\n    }\r\n\r\n    async search2(start, end) {\r\n        this.controller = new AbortController();\r\n        const signal = this.controller.signal;\r\n\r\n        var data = {\r\n            search_terms: this.state.search_terms.slice(start, end),\r\n            query_IDs: this.state.query_IDs,\r\n            lyric_IDs: this.state.lyric_IDs,\r\n        }\r\n\r\n        console.log(data)\r\n        this.setState({\r\n             fetching: true\r\n        })\r\n\r\n        this._isMounted = true;\r\n        const response = await fetch('/youtube_search', { \r\n                method: 'POST',\r\n                signal: signal,\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data),\r\n        })\r\n\r\n\r\n        if (this._isMounted) {\r\n            const body = await response.json()\r\n            console.log(body)\r\n            this.setState({\r\n                query_IDs: body.query_IDs,\r\n                lyric_IDs: body.lyric_IDs,\r\n                last_updated: end,\r\n                fetching: false        \r\n            })\r\n            this._isMounted = false\r\n        }\r\n    }\r\n    \r\n    async search(search_term) {\r\n        var query = search_term[0]\r\n        axios\r\n        .get(\"https://www.googleapis.com/youtube/v3/search?key=\" + this.state.apiKey + \"&q=\" + query + \"&part=snippet&maxResults=1&type=video\")\r\n        .then((response) => {\r\n            // var joined = this.state.query_IDs.concat(response.data.items[0].id.videoId);\r\n            var changed = this.state.query_IDs\r\n            // search_term[2]] is the index of the original search. Set that same index in the query_IDS to the youtube-video-id\r\n            changed[search_term[2]] = response.data.items[0].id.videoId\r\n            this.setState({\r\n                query_IDs: changed, \r\n            }, () => {\r\n            })\r\n        })\r\n        .catch((error) => {\r\n            console.log(error)\r\n        });\r\n    } \r\n\r\n    createButtons() {\r\n        var button_list = []\r\n        var current_index = this.state.current_index;\r\n        var size = this.state.length;\r\n        var playlist_tracks = this.state.search_terms;\r\n        var query_IDs = this.state.query_IDs;\r\n\r\n        for (let i = 4; i > 0; i--)\r\n            if (current_index >= i) {\r\n                button_list.push(<Button onClick={() => {this.handleQueueClick(current_index-i)}} className=\"spotify-youtube-previous-button\" key={current_index-i} disabled={query_IDs[current_index-i] === 0}>  {playlist_tracks[current_index-i][0]} </Button>)\r\n            }\r\n        button_list.push(<Button className=\"spotify-youtube-current-button\" key={current_index} disabled={query_IDs[current_index] === 0}>  {playlist_tracks[current_index][0]}  </Button>)\r\n        \r\n        for (let i=current_index+1; i < current_index+6; i++) {\r\n            if (i < size-1) {\r\n                button_list.push(<Button onClick={() => {this.handleQueueClick(i)}} className=\"spotify-youtube-next-buttons\" key={i} disabled={query_IDs[i] === 0}>  {playlist_tracks[i][0]} </Button>)\r\n            }\r\n        }\r\n        return button_list\r\n    }\r\n    handleQueueClick(index) {\r\n        this.setState({\r\n            current_index: index,\r\n            lyric: false,\r\n        }, () => {\r\n            console.log(this.state.current_index)\r\n            this.player.loadVideoById(this.state.query_IDs[this.state.current_index])\r\n        })\r\n    }\r\n\r\n    handleLyricToggleClick() {\r\n        this.setState({\r\n            lyric: !this.state.lyric,\r\n        }, () => {\r\n            if (this.state.lyric) {\r\n                this.player.loadVideoById(this.state.lyric_IDs[this.state.current_index])\r\n            }\r\n            else {\r\n                this.player.loadVideoById(this.state.query_IDs[this.state.current_index])\r\n            }\r\n            \r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.controller.abort()\r\n        this._isMounted = false\r\n    }\r\n\r\n    render() {\r\n        var last_updated = this.state.last_updated\r\n        return(\r\n            <div>\r\n                <div className=\"button-container\">\r\n                    <Link to=\"/pickPlaylist\">\r\n                        <img className=\"youtube-back-button\" src={require(\"../images/green-left-icon-arrow-left.png\")} alt=\"Green Left Arrow\" height=\"30\" />\r\n                    </Link>\r\n                    <Button className=\"youtube-lyric-button\" onClick={()=> this.handleLyricToggleClick()} disabled={this.state.query_IDs[this.state.current_index]=== 0}>\r\n                        {this.state.lyric === true ? \"Music Video\" :  \"Lyric Video\"}\r\n                    </Button>\r\n                    {this.createButtons()}\r\n                </div>\r\n                    <div className=\"player-and-sidebar\">\r\n                        <div id=\"player\" />\r\n                        <div className=\"sidebar\"/>\r\n                            {this.state.fetching ? \r\n                            <div className=\"typed-and-spinner\">\r\n                                <div>\r\n                                    <Typed\r\n                                        typedRef={(typed) => { this.typed = typed; }}\r\n                                        strings={['Loading...', \"Retrieving links from Youtube...\", \"Getting HD quality links...\", \"Getting lyric videos...\", \"Load\"]}\r\n                                        typeSpeed={30}\r\n                                        className=\"loading-typed\"\r\n                                        loop\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <Spinner animation=\"border\" className=\"loading-spinner\" />\r\n                                </div>\r\n                            </div> :\r\n                            <div>\r\n                                <Button className=\"youtube-load-more-button\" key=\"Load20\" onClick={()=>{this.search2(last_updated, last_updated+20 )}} disabled={this.state.query_IDs[this.state.current_index]=== 0 || this.state.fetching}> Load Next 20 </Button>\r\n                                <Button className=\"youtube-load-more-button\" key=\"Load50\" onClick={()=>{this.search2(last_updated, last_updated+50)}} disabled={this.state.query_IDs[this.state.current_index]=== 0 || this.state.fetching}>  Load Next 50 </Button>\r\n                                <Button className=\"youtube-load-more-button\" key=\"LoadAll\" onClick={()=>{this.search2(last_updated, this.state.length-1)}} disabled={this.state.query_IDs[this.state.current_index]=== 0 || this.state.fetching}> Load All Songs </Button>\r\n                            </div>}\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n  \r\n\r\nexport default  withRouter(Youtube)","import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport React, { Component } from 'react';\r\nimport {Button} from \"react-bootstrap\";\r\nimport Spotify from 'spotify-web-api-js';\r\nimport {Link} from 'react-router-dom';\r\nimport \"../css/modes.css\"\r\nimport NavigationBar from \"../components/Navigation\"\r\nimport ls from 'local-storage'\r\n\r\nconst spotifyWebApi = new Spotify();\r\n\r\nclass Modes extends Component {\r\n    constructor () {\r\n        super();\r\n        this.getHashParams = this.getHashParams.bind(this)\r\n        this.getHashParams2 = this.getHashParams2.bind(this)\r\n        this.params = this.getHashParams();\r\n        console.log(this.params)\r\n    }\r\n    getHashParams() {\r\n        if (window.location.href.split(\"/\")[4]) {\r\n            console.log(window.location.href)\r\n            var x = window.location.href.split(\"/\")[4]\r\n            console.log(x)\r\n            x = [x.split(\"&\")[0], x.split(\"&\")[1]]\r\n            console.log(x)\r\n            x = x.map((token) => {\r\n                return token.split(\"=\")[1]\r\n            })\r\n            console.log(x)\r\n            spotifyWebApi.setAccessToken(x[0])\r\n            localStorage.setItem(\"access_token\", x[0])\r\n            localStorage.setItem(\"refresh_token\", x[1])\r\n            console.log(localStorage.getItem(\"access_token\"))\r\n            console.log(localStorage.getItem(\"refresh_token\"))\r\n            return x[0]\r\n        }\r\n    }\r\n        \r\n    getHashParams2() {\r\n        var hashParams = {};\r\n        var e, r = /([^&;=]+)=?([^&;]*)/g,\r\n            q = window.location.hash.substring(1);\r\n        while ((e = r.exec(q))) {\r\n            hashParams[e[1]] = decodeURIComponent(e[2]);\r\n        }\r\n        return hashParams;\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div>\r\n                <NavigationBar back=\"\"></NavigationBar>\r\n                <div className=\"modes-page\">\r\n                    <div className=\"modes-container\">\r\n                        <div className=\"dynamic-button-and-image-container\">\r\n                            <Link to=\"/dynamic\">\r\n                                <Button className=\"dynamic-button\"> Dynamic </Button>\r\n                                <img className=\"dynamic-image\" src={require(\"../images/dynamic.jpg\")} alt=\"\"/>\r\n                            </Link>\r\n                        </div>\r\n                        <div className=\"playlist-button-and-image-container\">\r\n                            <Link to=\"/pickPlaylist\">\r\n                                <Button className=\"playlist-button\"> Playlist </Button>\r\n                                <img className=\"playlist-image\" src={require(\"../images/monkey-with-headphones.jpg\")} alt=\"\"/>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Modes\r\n","import React, { Component } from 'react';\r\nimport Spotify from 'spotify-web-api-js';\r\nimport {Button} from \"react-bootstrap\";\r\nimport \"../css/dynamic.css\"\r\nimport NavigationBar from \"../components/Navigation\"\r\nimport ls from 'local-storage'\r\n\r\nconst spotifyWebApi = new Spotify();\r\n\r\nclass Dynamic extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            lyric: false,\r\n        }\r\n        this.spotify_id = \"\";\r\n        this.query_IDs =  [0];\r\n        this.lyric_IDs =  [0];\r\n        this.first_video = true;\r\n        this.current_state = \"stopped\";\r\n        console.log(this.props)\r\n\r\n        // Set Access Token for Use\r\n        console.log(ls.get(\"access_token\"))\r\n        spotifyWebApi.setAccessToken(ls.get(\"access_token\"))\r\n        this.is_interval = true\r\n        this.search = this.search.bind(this)\r\n        this.loadVideo = this.loadVideo.bind(this)\r\n        this.onPlayerStateChange = this.onPlayerStateChange.bind(this)\r\n        this.handleLyricToggleClick = this.handleLyricToggleClick.bind(this)\r\n        this.checkStatus = this.checkStatus.bind(this)\r\n        this.onPlayerReady = this.onPlayerReady.bind(this) \r\n    }\r\n    componentWillUnmount () {\r\n        if (this.fetching) {\r\n            this.controller.abort()\r\n        }\r\n        clearInterval(window.refreshIntervalId)\r\n        console.log(\"cleared\")\r\n\r\n        //  instead of a local variable, and it works great! – S\r\n    }\r\n\r\n    async componentDidMount () {\r\n        // If this is the first video, we are going to load the script\r\n        if (this.first_video) {\r\n            spotifyWebApi.getMyCurrentPlaybackState().then(async (response) => {\r\n                // \r\n                if (response.item) {\r\n\r\n                    this.spotify_id = response.item.id\r\n                    await this.search([response.item.name + \" - \" + response.item.artists[0].name, response.item.id, 0])\r\n\r\n                    if (!window.YT) {\r\n                        // Adding Script Element\r\n                        const tag = document.createElement('script');\r\n                        tag.src = 'https://www.youtube.com/iframe_api'\r\n                        window.onYouTubeIframeAPIReady =  () => { this.loadVideo(this.query_IDs[0])}\r\n                        const firstScriptTag = document.getElementsByTagName('script')[0];\r\n                        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n                    }\r\n                    else {\r\n                        this.loadVideo(this.query_IDs[0])\r\n                    }\r\n                    this.first_video = false;  \r\n                }\r\n\r\n                else {\r\n                    // If nothign is currently playing, get recently playing tracks\r\n                    spotifyWebApi.getMyRecentlyPlayedTracks().then(async (response) => {\r\n                        this.spotify_id = response.items[0].track.id\r\n                        await this.search([response.items[0].track.name + \" - \" + response.items[0].track.artists[0].name, response.items[0].track.id, 0])\r\n                        \r\n                        if (!window.YT) {\r\n                            // Adding Script Element\r\n                            const tag = document.createElement('script');\r\n                            tag.src = 'https://www.youtube.com/iframe_api'\r\n                            window.onYouTubeIframeAPIReady = () => {this.loadVideo(this.query_IDs[0])};\r\n                            const firstScriptTag = document.getElementsByTagName('script')[0];\r\n                            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n                        }\r\n                        else {\r\n                            this.loadVideo(this.query_IDs[0]);\r\n                        }\r\n                        this.first_video = false;\r\n                            \r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        // Check status every x milliseconds\r\n    window.refreshIntervalId = setInterval(() => {this.checkStatus()}, 2500)\r\n    }\r\n\r\n    checkStatus () {\r\n        spotifyWebApi.getMyCurrentPlaybackState().then(async (response) => {\r\n            console.log(response, \"response\")\r\n            console.log(this.spotify_id, \"curr spotify_id\")\r\n            // If shuffle, pause, if not,  play.\r\n            if ((response.shuffle_state === true) && (this.current_state=\"playing\")) {\r\n                document.getElementById('pause').click()\r\n                this.current_state = \"paused\"\r\n            }\r\n            else if ((response.shuffle_state === false) && (this.current_state=\"paused\")) {\r\n                document.getElementById('play').click()\r\n                this.current_state = \"playing\"\r\n            }\r\n\r\n            // If on repeat, toggle lyric video/music video\r\n            if (response.repeat_state === \"context\") {\r\n                if (!this.first_video) {\r\n                    this.handleLyricToggleClick()\r\n                    spotifyWebApi.setRepeat(\"off\")\r\n                }\r\n\r\n            }\r\n\r\n            // If it's playing and its not our current\r\n            if (response.item && (response.item.id !== this.spotify_id)) {\r\n                clearInterval(window.refreshIntervalId)\r\n                this.spotify_id = response.item.id\r\n                await this.search([response.item.name + \" - \" + response.item.artists[0].name, response.item.id, 0]).then((response) => {\r\n                    console.log(this.query_IDs)\r\n                    this.current_state = \"playing\"\r\n                    this.is_interval = true\r\n                })\r\n                if (response.is_playing) {\r\n                    spotifyWebApi.pause()\r\n                }\r\n                window.refreshIntervalId = setInterval(() => {this.checkStatus()}, 2500)\r\n            } \r\n        })\r\n\r\n    }\r\n\r\n    \r\n    async search(search_term) {\r\n        console.log(\"started searching\")\r\n        // Creating a signal so we can abort the fetch request when we unmout\r\n        this.controller = new AbortController();\r\n        const signal = this.controller.signal;\r\n\r\n        var data = {\r\n            search_terms: [search_term],\r\n            query_IDs: [0],\r\n            lyric_IDs: [0],\r\n        }\r\n\r\n        console.log(data)\r\n        this.fetching = true\r\n        const response = await fetch('/youtube_search', {   \r\n            method: 'POST',\r\n                signal: signal,\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(data),\r\n        })\r\n\r\n        const body = await response.json()\r\n        console.log(body)\r\n        this.query_IDs =  body.query_IDs;\r\n        this.lyric_IDs = body.lyric_IDs;\r\n        this.fetching =  false;\r\n        this.setState({lyric: false})\r\n\r\n        if (!this.first_video) {\r\n            this.player.loadVideoById(body.query_IDs[0])\r\n            this.current_state = \"playing\"\r\n        }\r\n\r\n    }\r\n\r\n    loadVideo = (id) => {\r\n        this.player = new window.YT.Player('player', {\r\n            height: '720',\r\n            width: '1280',\r\n            videoId: id,\r\n            playerVars: {\r\n                controls: 1,\r\n                autoplay: 0,\r\n                disablekb: 1,\r\n                enablejsapi: 1,\r\n         },\r\n        events: {\r\n            'onReady': this.onPlayerReady,\r\n            'onStateChange': this.onPlayerStateChange,\r\n            'onError': this.onError,\r\n        }\r\n        });\r\n    }\r\n    \r\n\r\n    onPlayerReady(e) {\r\n        document.getElementById('pause').addEventListener('click', function() {\r\n            e.target.pauseVideo();\r\n        })\r\n        document.getElementById('play').addEventListener('click', function() {\r\n            e.target.playVideo();\r\n        })\r\n        e.target.playVideo();\r\n    }\r\n\r\n    onPlayerStateChange(e) {\r\n        if (e.data === window.YT.PlayerState.PLAYING) {\r\n            this.current_state = \"playing\"\r\n        }\r\n        if (e.data === window.YT.PlayerState.PAUSED) {\r\n            this.current_state = \"paused\"\r\n        }\r\n        if (e.data === window.YT.PlayerState.ENDED) {\r\n            this.player.loadVideoById(this.query_IDs[0])\r\n        }\r\n    }\r\n    onError(e) {\r\n        if ((e.data === 101) || (e.data === 150)) {\r\n            this.player.loadVideoById(this.lyric_IDs[0])\r\n        }\r\n    }\r\n\r\n    handleLyricToggleClick() {\r\n        this.setState({\r\n            lyric: !this.state.lyric,\r\n        }, () => {\r\n            if (this.state.lyric) {\r\n                this.player.loadVideoById(this.lyric_IDs[0])\r\n            }\r\n            else {\r\n                this.player.loadVideoById(this.query_IDs[0])\r\n            }\r\n            \r\n        })\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div> \r\n                <NavigationBar back=\"modes\">\r\n                    <Button className=\"dynamic-lyric-button\" onClick={()=> this.handleLyricToggleClick()}>\r\n                            {this.state.lyric ? \"Music Video\" :  \"Lyric Video\"}\r\n                    </Button>\r\n                </NavigationBar>\r\n                <div className = \"player-container\">\r\n                    <div id=\"player\"> </div>\r\n                    <Button id=\"pause\" className=\"invisible\">Pause</Button>\r\n                    <Button id=\"play\" className=\"invisible\">Play</Button>\r\n                </div>\r\n            </div>)\r\n            \r\n    }\r\n}\r\n\r\n\r\nexport default Dynamic\r\n","import React, { Component } from \"react\";\r\nimport {BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport Home from \"./pages/home.js\"\r\nimport PickPlaylist from \"./pages/pickPlaylist.js\"\r\nimport Youtube from \"./pages/youtube.js\"\r\nimport Modes from \"./pages/modes.js\"\r\nimport Dynamic from \"./pages/dynamic.js\"\r\nimport Spotify from \"spotify-web-api-js\";\r\nconst spotifyWebApi = new Spotify();\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(localStorage)\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Router>\r\n          <Switch>\r\n            <Route path=\"/modes\" component={Modes}/>\r\n            <Route path=\"/youtube\" component={Youtube}/>\r\n            <Route path=\"/dynamic\" component={Dynamic} />\r\n            <Route path=\"/pickPlaylist\" component={PickPlaylist}/>\r\n            <Route path=\"/\" component={Home} />\r\n          </Switch>\r\n        </Router> \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./css/index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}